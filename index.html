<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è‹±æ–‡çµ±æ¸¬é¡Œåº«</title>

<style>
body{
  font-family: Arial;
  background:#f4f6fb;
  margin:0;
  padding:20px;
}
.container{
  max-width:600px;
  margin:auto;
  background:white;
  padding:20px;
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
button{
  display:block;
  width:100%;
  margin:8px 0;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  cursor:pointer;
}
.correct{
  background:#4caf50;
  color:white;
}
.wrong{
  background:#f44336;
  color:white;
}
</style>
</head>

<body>
<div class="container">
  <h2 id="question"></h2>
  <div id="options"></div>
  <p id="result"></p>
</div>

<script>

const questions = [
  {
    q:"It is a big ______ for people to learn that the only movie theater is going to shut down.",
    opts:["cable","shock","tube","zone"],
    c:1
  },
  {
    q:"Loud noises make it hard for me to ______.",
    opts:["bend","focus","panic","wander"],
    c:1
  }
];

let current = 0;

function loadQuestion(){
  const q = questions[current];
  document.getElementById("question").innerText = q.q;
  const optDiv = document.getElementById("options");
  optDiv.innerHTML="";
  q.opts.forEach((opt,i)=>{
    const btn = document.createElement("button");
    btn.innerText = opt;
    btn.onclick = ()=>checkAnswer(i);
    optDiv.appendChild(btn);
  });
}

function checkAnswer(i){
  const buttons = document.querySelectorAll("button");
  if(i === questions[current].c){
    buttons[i].classList.add("correct");
    document.getElementById("result").innerText="ç­”å°äº†ï¼";
  }else{
    buttons[i].classList.add("wrong");
    document.getElementById("result").innerText="ç­”éŒ¯äº†";
  }
}

loadQuestion();

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>111-114 çµ±æ¸¬è‹±æ–‡çµ‚æ¥µé¡Œåº«ï¼ˆ100é¡Œï¼‰ï¼‹éŒ¯é¡Œæœ¬ï¼‹å–®å­—å¡</title>
  <style>
    :root { --primary:#2980b9; --success:#27ae60; --danger:#c0392b; --bg:#ecf0f1; }
    body { font-family:'PingFang TC',sans-serif; background:var(--bg); margin:0; padding:10px; line-height:1.6; }
    .app { max-width:600px; margin:auto; background:#fff; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); overflow:hidden; }
    header { background:#2c3e50; color:#fff; padding:15px; text-align:center; }
    .stats { display:flex; justify-content:space-around; background:#34495e; color:#bdc3c7; padding:6px; font-size:0.85em; gap:8px; flex-wrap:wrap; }
    .quiz-body { padding:20px; min-height:420px; }
    .q-text { font-size:1.1em; font-weight:700; margin-bottom:16px; color:#34495e; }
    .opt { width:100%; padding:12px; margin-bottom:8px; border:1px solid #ddd; border-radius:10px; background:#fff; cursor:pointer; text-align:left; transition:0.2s; }
    .opt:hover:not([disabled]) { background:#f7f9f9; border-color:var(--primary); }
    .opt.correct { background:var(--success)!important; color:#fff; border-color:var(--success); }
    .opt.wrong { background:var(--danger)!important; color:#fff; border-color:var(--danger); }
    .feedback { margin-top:12px; padding:12px; background:#fcf3cf; border-left:4px solid #f1c40f; font-size:0.9em; display:none; border-radius:8px; }
    .next-btn { width:100%; padding:14px; background:var(--primary); color:#fff; border:none; border-radius:10px; margin-top:10px; cursor:pointer; font-weight:700; }
    .progress-bar { height:4px; background:#eee; width:100%; }
    .progress-fill { height:100%; background:var(--success); width:0%; transition:0.3s; }
    .modebar { max-width:600px; margin:10px auto 10px; display:flex; gap:8px; }
    .modebar button { flex:1; padding:10px; border:0; border-radius:10px; color:#fff; cursor:pointer; font-weight:700; }
    #modeQuiz { background:#2c3e50; }
    #modeWrong { background:#8e44ad; }
    #modeVocab { background:#16a085; }
    .subbar { display:flex; gap:8px; margin-top:10px; }
    .subbar button { flex:1; padding:10px; border:1px solid #ddd; border-radius:10px; cursor:pointer; background:#fff; font-weight:700; }
    .muted { color:#7f8c8d; font-size:0.9em; }
  </style>
</head>

<body>

<!-- æ¨¡å¼åˆ‡æ› -->
<div class="modebar">
  <button id="modeQuiz">ğŸ“˜ æ¸¬é©—æ¨¡å¼</button>
  <button id="modeWrong">ğŸ§¾ éŒ¯é¡Œæœ¬</button>
  <button id="modeVocab">ğŸƒ å–®å­—å¡</button>
</div>

<div class="app">
  <header>
    <h3>ğŸ“ çµ±æ¸¬è‹±æ–‡ï¼ˆ100é¡Œï¼‰ï¼‹éŒ¯é¡Œæœ¬ï¼‹å–®å­—å¡</h3>
  </header>

  <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>

  <div class="stats">
    <span id="qCount">é¡Œæ¬¡: -</span>
    <span id="scoreDisplay">å¾—åˆ†: 0</span>
    <span id="modeDisplay">æ¨¡å¼: æ¸¬é©—</span>
  </div>

  <div class="quiz-body">
    <div id="qText" class="q-text">è¼‰å…¥ä¸­...</div>
    <div id="optContainer"></div>

    <div id="feedbackBox" class="feedback">
      <strong>ğŸ’¡ è§£æï¼š</strong><span id="reason"></span>
    </div>

    <button id="nextBtn" class="next-btn" style="display:none;" onclick="goNext()">ä¸‹ä¸€é¡Œ</button>

    <div class="subbar">
      <button id="clearWrong">æ¸…ç©ºéŒ¯é¡Œæœ¬</button>
      <button id="clearVocab">æ¸…ç©ºå–®å­—å¡é€²åº¦</button>
    </div>
    <div class="muted" style="margin-top:8px;">
      âœ… éŒ¯é¡Œæœ¬è¦å‰‡ï¼šç­”éŒ¯â†’åŠ å…¥ï¼›åœ¨éŒ¯é¡Œæœ¬ä½œç­”ç­”å°â†’ç§»é™¤ï¼›å†ç­”éŒ¯â†’åˆæœƒç•™ä¸‹ã€‚<br/>
      âœ… å–®å­—å¡ï¼šç¿»é¢çœ‹ä¸­æ–‡ï¼æˆ‘æœƒäº†ï¼æˆ‘ä¸æœƒï¼ˆé€²åº¦æœƒä¿å­˜ï¼‰ã€‚
    </div>
  </div>
</div>

<script>
/* =========================
   A) é¡Œåº«ç”¢ç”Ÿï¼ˆ100é¡Œä¸é‡è¤‡ï¼‰
   ========================= */
const TOTAL = 100;

// ä½ åŸæœ¬çš„çœŸé¡Œ/é¡Œåº«ï¼ˆå¯ç¹¼çºŒå¢åŠ ï¼‰
const rawQuestions = [
  // --- 114 å¹´çœŸé¡Œ ---
  { q: "This child is using colored chalks to ______ pictures on a blank piece of paper.", opts: ["draw", "heat", "mail", "type"], c: 0, r: "114å­—å½™1ï¼šdraw æ˜¯ã€Œç•«ã€ã€‚" },
  { q: "The room was so ______ that I couldn't find space for these new chairs.", opts: ["available", "crowded", "empty", "positive"], c: 1, r: "114å­—å½™2ï¼šcrowded (æ“æ“ çš„)ã€‚" },
  { q: "Many people have climbed the main ______ of Mount Jade, the highest point in Taiwan.", opts: ["base", "peak", "shore", "valley"], c: 1, r: "114å­—å½™3ï¼špeak æ˜¯ã€Œå±±é ‚ã€é«˜å³°ã€ã€‚" },
  { q: "After looking at his grandfather's ______ on the wall, John felt they looked alike.", opts: ["cattle", "jewelry", "portrait", "whistle"], c: 2, r: "114å­—å½™4ï¼športrait æ˜¯ã€Œè‚–åƒã€ã€‚" },
  { q: "It is risky to touch plants in rainforests because some can be ______ to humans.", opts: ["fashionable", "jealous", "poisonous", "reasonable"], c: 2, r: "114å­—å½™5ï¼špoisonous æœ‰æ¯’çš„ã€‚" },
  { q: "Governments have the ______ to punish people who drink and drive.", opts: ["authority", "bargain", "courtesy", "infection"], c: 0, r: "114å­—å½™6ï¼šauthority æ¬ŠåŠ›ã€‚" },
  { q: "Sensor lights will ______ turn on by themselves when someone passes by.", opts: ["automatically", "organically", "productively", "selfishly"], c: 0, r: "114å­—å½™7ï¼šautomatically è‡ªå‹•åœ°ã€‚" },
  { q: "My sister decided to ______ her old habits and start a fresh chapter.", opts: ["bring about", "carry on", "give up", "run into"], c: 2, r: "114å­—å½™10ï¼šabandon = give up æ”¾æ£„ã€‚" },

  // --- 113 å¹´çœŸé¡Œ ---
  { q: "Johnny is wearing a very ______ hat that looks different from others.", opts: ["common", "general", "regular", "special"], c: 3, r: "113å­—å½™1ï¼šspecial ç‰¹åˆ¥çš„ã€‚" },
  { q: "Loud noises make it hard for me to ______, so I find a quiet place to study.", opts: ["bend", "focus", "panic", "wander"], c: 1, r: "113å­—å½™2ï¼šfocus å°ˆæ³¨ã€‚" },
  { q: "Being friendly with roommates can help you stay away from ______.", opts: ["dialogues", "conflicts", "personality", "relationship"], c: 1, r: "113å­—å½™5ï¼šconflict è¡çªã€‚" },
  { q: "Jack will never change his decisions; he is a very ______ person.", opts: ["easy-going", "democratic", "obedient", "stubborn"], c: 3, r: "113å­—å½™6ï¼šstubborn å›ºåŸ·ã€‚" },
  { q: "May has to ______ her fear of flying if she wants to travel by airplane.", opts: ["conquer", "hunt", "recover", "select"], c: 0, r: "113å­—å½™9ï¼šconquer å…‹æœã€‚" },

  // --- 112 å¹´çœŸé¡Œ ---
  { q: "It is a big ______ to learn that the only movie theater is going to shut down.", opts: ["cable", "shock", "tube", "zone"], c: 1, r: "112å­—å½™1ï¼šshock éœ‡é©šã€‚" },
  { q: "The animal rights group is going to ______ a party to raise money.", opts: ["break", "fight", "hold", "spell"], c: 2, r: "112å­—å½™2ï¼šhold a party èˆ‰è¾¦ã€‚" },
  { q: "The boss agreed to increase workers' ______ to improve their life.", opts: ["permits", "risks", "scales", "wages"], c: 3, r: "112å­—å½™6ï¼šwages å·¥è³‡ã€‚" },
  { q: "Since my teeth are very ______ to sweets, I don't eat candies.", opts: ["attractive", "effective", "positive", "sensitive"], c: 3, r: "112å­—å½™7ï¼šsensitive æ•æ„Ÿçš„ã€‚" },
  { q: "Whale watching today ______ a popular activity in Taiwan.", opts: ["became", "become", "has become", "will become"], c: 2, r: "112å…‹æ¼å­—ï¼šç¾åœ¨å®Œæˆå¼ has becomeã€‚" },

  // --- 111 å¹´çœŸé¡Œ ---
  { q: "We had better leave early to ______ the heavy traffic.", opts: ["avoid", "drop", "invite", "mind"], c: 0, r: "111å­—å½™1ï¼šavoid é¿å…ã€‚" },
  { q: "I've put on so much weight that these jeans are too ______.", opts: ["loose", "ripe", "swift", "tight"], c: 3, r: "111å­—å½™3ï¼štight ç·Šçš„ã€‚" },
  { q: "The police ______ the bank robber through the streets last night.", opts: ["begged", "chased", "praised", "treated"], c: 1, r: "111å­—å½™9ï¼šchased è¿½é€ã€‚" },
  { q: "I have looked through the records ______, but couldn't find the person.", opts: ["eventually", "marginally", "occasionally", "thoroughly"], c: 3, r: "111å­—å½™10ï¼šthoroughly å¾¹åº•åœ°ã€‚" },

  // --- æ¨¡æ“¬ ---
  { q: "Success often depends ______ hard work and a positive attitude.", opts: ["at", "on", "in", "with"], c: 1, r: "å¿…è€ƒç‰‡èªï¼šdepend onã€‚" },
  { q: "Rainforests are important because many products are ______ plants.", opts: ["made from", "made into", "made by", "made with"], c: 0, r: "å¿…è€ƒï¼šmade from ç”±â€¦è£½æˆã€‚" },
  { q: "I have lived in this city ______ I was born.", opts: ["for", "since", "during", "when"], c: 1, r: "å¿…è€ƒï¼šsince + éå»æ™‚é–“é»ã€‚" },
  { q: "The number of students using e-cigarettes ______ over the past few years.", opts: ["double", "has doubled", "doubled", "doubling"], c: 1, r: "å¿…è€ƒï¼šç¾åœ¨å®Œæˆå¼ has doubledã€‚" }
];

// ç”¨ã€Œæ¨¡æ¿ + å–®å­—ã€è£œé¡Œï¼šç¢ºä¿é¡Œå¹¹ä¸é‡è¤‡
const vocabPairs = [
  { w: "authority", zh: "æ¬ŠåŠ›" },
  { w: "conflict", zh: "è¡çª" },
  { w: "outcome", zh: "çµæœ" },
  { w: "regulation", zh: "è¦å®š" },
  { w: "intense", zh: "å¼·çƒˆçš„" },
  { w: "moderate", zh: "ä¸­ç­‰çš„" },
  { w: "available", zh: "å¯å–å¾—çš„" },
  { w: "crowded", zh: "æ“æ“ çš„" },
  { w: "sensitive", zh: "æ•æ„Ÿçš„" },
  { w: "stubborn", zh: "å›ºåŸ·çš„" },
  { w: "poisonous", zh: "æœ‰æ¯’çš„" },
  { w: "thoroughly", zh: "å¾¹åº•åœ°" }
];

const templates = [
  (p) => ({
    q: `(å¼·åŒ–å­—å½™) The teacher explained the meaning of "${p.w}" to the class.`,
    opts: ["schedule", p.w, "laundry", "plastic"],
    c: 1,
    r: `å­—å½™ï¼š${p.w} = ${p.zh}`
  }),
  (p) => ({
    q: `(å¼·åŒ–ç”¨æ³•) The government has the ______ to make new laws.`,
    opts: ["authority", "battery", "gallery", "sympathy"],
    c: 0,
    r: "å­—å½™ï¼šauthority = æ¬ŠåŠ›ï¼ˆæ”¿åºœåˆ¶å®š/åŸ·æ³•ï¼‰ã€‚"
  }),
  (p) => ({
    q: `(å¼·åŒ–åŒç¾©) The final ______ of the meeting will be announced tomorrow.`,
    opts: ["outcome", "portrait", "wages", "valley"],
    c: 0,
    r: "å­—å½™ï¼šoutcome = çµæœï¼ˆfinal outcomeï¼‰ã€‚"
  }),
  (p) => ({
    q: `(å¿…è€ƒæ–‡æ³•) I have worked here ______ 2020.`,
    opts: ["for", "since", "during", "by"],
    c: 1,
    r: "æ–‡æ³•ï¼šsince + éå»æ™‚é–“é»ï¼ˆ2020ï¼‰ã€‚"
  }),
  (p) => ({
    q: `(å¿…è€ƒç‰‡èª) You should pay attention ______ the instructions.`,
    opts: ["at", "to", "on", "with"],
    c: 1,
    r: "ç‰‡èªï¼špay attention toã€‚"
  }),
  (p) => ({
    q: `(å…‹æ¼å­—æ„Ÿ) The streets were so ______ that we could hardly move.`,
    opts: ["empty", "crowded", "private", "local"],
    c: 1,
    r: "å­—å½™ï¼šcrowded = æ“æ“ çš„ã€‚"
  })
];

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// å»é‡ï¼šä»¥é¡Œå¹¹ q ç•¶å”¯ä¸€éµ
function buildUniqueQuestions(base, total) {
  const seen = new Set();
  const out = [];

  for (const item of base) {
    const key = item.q.trim();
    if (!seen.has(key)) {
      seen.add(key);
      out.push(item);
    }
    if (out.length >= total) return out.slice(0, total);
  }

  let t = 0;
  let v = 0;
  while (out.length < total) {
    const p = vocabPairs[v % vocabPairs.length];
    const maker = templates[t % templates.length];
    const newQ = maker(p);
    const key = newQ.q.trim();

    if (!seen.has(key)) {
      seen.add(key);
      out.push(newQ);
    }

    t++;
    v++;
    if (t > 5000) break;
  }

  return out.slice(0, total);
}

const questions = buildUniqueQuestions(rawQuestions, TOTAL);
shuffle(questions);

/* =========================
   B) éŒ¯é¡Œæœ¬ + å–®å­—å¡ + æ¨¡å¼åˆ‡æ›
   ========================= */
const LS_WRONG = "tcte_wrongbook_v1";
const LS_VOCAB = "tcte_vocab_progress_v1";

const modeDisplay = document.getElementById("modeDisplay");
const qTextEl = document.getElementById("qText");
const qCountEl = document.getElementById("qCount");
const scoreEl = document.getElementById("scoreDisplay");
const optContainer = document.getElementById("optContainer");
const feedbackBox = document.getElementById("feedbackBox");
const reasonEl = document.getElementById("reason");
const nextBtn = document.getElementById("nextBtn");
const progressFill = document.getElementById("progressFill");

function qidOf(item){
  return btoa(unescape(encodeURIComponent(
    item.q + "||" + item.opts.join("|") + "||" + item.c
  ))).slice(0, 80);
}

function loadWrongBook(){
  try { return JSON.parse(localStorage.getItem(LS_WRONG)) || {}; }
  catch(e){ return {}; }
}
function saveWrongBook(book){ localStorage.setItem(LS_WRONG, JSON.stringify(book)); }
function addToWrongBook(item){
  const book = loadWrongBook();
  book[qidOf(item)] = item;
  saveWrongBook(book);
}
function removeFromWrongBook(item){
  const book = loadWrongBook();
  delete book[qidOf(item)];
  saveWrongBook(book);
}
function getWrongBookList(){ return Object.values(loadWrongBook()); }

function extractVocabCardsFromQuestions(qs){
  const cards = [];
  const seen = new Set();
  for (const it of qs){
    const r = (it.r || "").trim();
    const en = it.opts?.[it.c];
    if (!en || en.includes(" ") || en.includes("+")) continue;

    let zh = "";
    const idx = r.indexOf("ï¼š");
    if (idx !== -1) zh = r.slice(idx + 1).replace(/[()ã€‚]/g, "").trim();
    if (!zh) zh = "ï¼ˆè‡ªè¡Œè£œä¸­æ–‡ï¼‰";

    const key = en.toLowerCase();
    if (seen.has(key)) continue;
    seen.add(key);

    cards.push({ word: en, meaning: zh, hint: r || "" });
  }
  return cards;
}

function loadVocabProgress(){
  try { return JSON.parse(localStorage.getItem(LS_VOCAB)) || {}; }
  catch(e){ return {}; }
}
function saveVocabProgress(p){ localStorage.setItem(LS_VOCAB, JSON.stringify(p)); }

let mode = "quiz"; // quiz | wrong | vocab
let pool = [];
let currentIdx = 0;
let score = 0;

function setMode(m){
  mode = m;
  modeDisplay.innerText = `æ¨¡å¼: ${m === "quiz" ? "æ¸¬é©—" : m === "wrong" ? "éŒ¯é¡Œæœ¬" : "å–®å­—å¡"}`;
}

function setPool(newPool){
  pool = newPool;
  currentIdx = 0;
  score = 0;
  scoreEl.innerText = `å¾—åˆ†: ${score}`;
}

function renderQuestion(){
  const item = pool[currentIdx];
  qTextEl.innerText = item.q;
  qCountEl.innerText = `é¡Œæ¬¡: ${currentIdx + 1} / ${pool.length}`;

  optContainer.innerHTML = '';
  feedbackBox.style.display = 'none';
  nextBtn.style.display = 'none';

  item.opts.forEach((opt, idx) => {
    const btn = document.createElement('button');
    btn.className = 'opt';
    btn.innerText = opt;
    btn.onclick = () => handleChoice(idx, btn);
    optContainer.appendChild(btn);
  });

  progressFill.style.width = `${((currentIdx + 1) / pool.length) * 100}%`;
}

function handleChoice(idx, btn){
  const item = pool[currentIdx];
  const allOpts = document.querySelectorAll('.opt');
  allOpts.forEach(b => b.disabled = true);

  if (idx === item.c) {
    btn.classList.add('correct');
    score++;
    scoreEl.innerText = `å¾—åˆ†: ${score}`;
    if (mode === "wrong") removeFromWrongBook(item);
  } else {
    btn.classList.add('wrong');
    allOpts[item.c].classList.add('correct');
    addToWrongBook(item);
  }

  reasonEl.innerText = item.r || "";
  feedbackBox.style.display = 'block';
  nextBtn.style.display = 'block';
}

function goNext(){
  currentIdx++;
  if (currentIdx < pool.length) renderQuestion();
  else {
    if (mode === "wrong") {
      const remain = getWrongBookList();
      alert(`éŒ¯é¡Œæœ¬ç·´ç¿’çµæŸï¼å‰©ä¸‹éŒ¯é¡Œæ•¸ï¼š${remain.length}`);
      startWrongBook();
    } else {
      alert(`æ¸¬é©—çµæŸï¼ç¸½å¾—åˆ†ï¼š${score} / ${pool.length}`);
    }
  }
}
window.goNext = goNext;

/* ====== ä¸‰å€‹æ¨¡å¼ ====== */
function startQuiz(){
  setMode("quiz");
  setPool(questions.slice(0, TOTAL));
  renderQuestion();
}

function startWrongBook(){
  setMode("wrong");
  const list = getWrongBookList();
  if (list.length === 0) {
    qTextEl.innerText = "ğŸ‰ ç›®å‰æ²’æœ‰éŒ¯é¡Œï¼";
    qCountEl.innerText = "é¡Œæ¬¡: -";
    optContainer.innerHTML = "";
    feedbackBox.style.display = "none";
    nextBtn.style.display = "none";
    progressFill.style.width = "0%";
    scoreEl.innerText = `å¾—åˆ†: 0`;
    return;
  }
  setPool(list);
  renderQuestion();
}

/* ====== å–®å­—å¡ ====== */
const vocabCards = extractVocabCardsFromQuestions(questions);
let vIdx = 0;
let showMeaning = false;

function startVocab(){
  setMode("vocab");
  const prog = loadVocabProgress();
  const total = vocabCards.length;

  if (total === 0) {
    qTextEl.innerText = "ï¼ˆç›®å‰æŠ“ä¸åˆ°å–®å­—å¡ï¼›ä½ å¯ä»¥è‡ªå·±åš vocabCards é™£åˆ—ï¼‰";
    qCountEl.innerText = "å–®å­—å¡: -";
    optContainer.innerHTML = "";
    feedbackBox.style.display = "none";
    nextBtn.style.display = "none";
    progressFill.style.width = "0%";
    return;
  }

  function countStatus(s){
    return Object.values(loadVocabProgress()).filter(x => x === s).length;
  }

  function renderCard(){
    const card = vocabCards[vIdx];
    const key = card.word.toLowerCase();
    const status = prog[key] || "new";

    qCountEl.innerText = `å–®å­—å¡: ${vIdx + 1} / ${total}ï¼ˆå·²æœƒ:${countStatus("know")}ï½œå¾…è¤‡ç¿’:${countStatus("dont")}ï¼‰`;
    scoreEl.innerText = `ç‹€æ…‹: ${status === "know" ? "âœ… æœƒ" : status === "dont" ? "ğŸŸ¡ ä¸æœƒ" : "ğŸ†• æ–°"}`;

    qTextEl.innerText = showMeaning ? `${card.word} ï¼ ${card.meaning}` : `${card.word}`;

    optContainer.innerHTML = `
      <button class="opt" id="flipBtn">ğŸ”„ ç¿»é¢ï¼ˆçœ‹ä¸­æ–‡/æç¤ºï¼‰</button>
      <button class="opt" id="knowBtn">âœ… æˆ‘æœƒäº†</button>
      <button class="opt" id="dontBtn">ğŸŸ¡ æˆ‘ä¸æœƒï¼ˆåŠ å…¥è¤‡ç¿’ï¼‰</button>
      <button class="opt" id="prevBtn">â¬… ä¸Šä¸€å¼µ</button>
      <button class="opt" id="nextCardBtn">â¡ ä¸‹ä¸€å¼µ</button>
      <div style="margin-top:10px;color:#666;font-size:0.9em;">
        <div><b>æç¤º/è€ƒé»ï¼š</b>${card.hint || "ï¼ˆç„¡ï¼‰"}</div>
      </div>
    `;
    feedbackBox.style.display = "none";
    nextBtn.style.display = "none";
    progressFill.style.width = `${((vIdx + 1) / total) * 100}%`;

    document.getElementById("flipBtn").onclick = () => { showMeaning = !showMeaning; renderCard(); };
    document.getElementById("knowBtn").onclick = () => {
      prog[key] = "know";
      saveVocabProgress(prog);
      nextCard();
    };
    document.getElementById("dontBtn").onclick = () => {
      prog[key] = "dont";
      saveVocabProgress(prog);
      nextCard();
    };
    document.getElementById("prevBtn").onclick = () => { vIdx = (vIdx - 1 + total) % total; showMeaning = false; renderCard(); };
    document.getElementById("nextCardBtn").onclick = () => { nextCard(); };
  }

  function nextCard(){
    vIdx = (vIdx + 1) % total;
    showMeaning = false;
    renderCard();
  }

  renderCard();
}

/* ====== æ¸…é™¤åŠŸèƒ½ ====== */
document.getElementById("clearWrong").onclick = () => {
  localStorage.removeItem(LS_WRONG);
  alert("å·²æ¸…ç©ºéŒ¯é¡Œæœ¬ï¼");
  if (mode === "wrong") startWrongBook();
};
document.getElementById("clearVocab").onclick = () => {
  localStorage.removeItem(LS_VOCAB);
  alert("å·²æ¸…ç©ºå–®å­—å¡é€²åº¦ï¼");
  if (mode === "vocab") startVocab();
};

/* ====== æ¨¡å¼åˆ‡æ›æŒ‰éˆ• ====== */
document.getElementById("modeQuiz").onclick = startQuiz;
document.getElementById("modeWrong").onclick = startWrongBook;
document.getElementById("modeVocab").onclick = startVocab;

/* ====== é è¨­é€²å…¥æ¸¬é©— ====== */
startQuiz();
</script>

</body>
</html>
